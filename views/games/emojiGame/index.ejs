<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Sequence Game</title>
    <%- include('../../partials/headlinks.ejs') %>
    <style>
        * {
            padding: 0;
            margin: 0;
            font-family: sans-serif;


        }

        .emoji-game {
            padding: 8px;
            text-align: center;
        }

        .emoji-game .game {
            max-width: 800px;
            margin: 32px auto;
            margin-top: 30px;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 16px;

            border-radius: 8px;
            padding: 16px;
        }


        .emoji-game .game .emoji-btn {
            font-size: 48px;
            width: 22%;
            padding: 24px 4px;
            border-radius: 16px;
            background-color: white;
            cursor: pointer;
            border: none;
        }

        .emoji-game .card4 {
            max-width: 450px;
        }

        .emoji-game .card4 .emoji-btn {
            width: 46%;
        }

        .emoji-game .game .emoji-btn:active {
            background-color: rgb(194, 194, 255);
            transform: translateY(4px);
            transition: transform .6s;
        }

        .model-game {
            font-family: sans-serif;
            padding: 24px 8px;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            width: 200px;
            box-shadow: 2px 0 8px rgb(173, 173, 173);
            border-radius: 8px;
        }

        .model-game button {
            padding: 8px;
            margin-top: 16px;
            background-color: rgb(255 0 0 / 70%);
            color: #ffffff;
            border: 2px solid rgb(0, 0, 0);
            letter-spacing: 1px;
            border-radius: 4px;
            cursor: pointer;
            border: none;
        }



        @media only screen and (max-width:500px) {
            .emoji-game .game {
                gap: 8px;
            }

            .emoji-game .game .emoji-btn {
                font-size: 48px;
                padding: 24px 0;
            }
        }

        @media only screen and (max-width:455px) {
            .emoji-game .game .emoji-btn {
                font-size: 40px;
                padding: 16px 0;
            }
        }

        @media only screen and (max-width:360px) {
            .emoji-game .game .emoji-btn {
                font-size: 36px;
                padding: 12px 0;
            }
        }

        .start-model {
            width: 100vw;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            display: grid;
            place-items: center;
            background-color: #B8D9D4;
        }

        .start-model .main-model {
            padding: 16px;
            text-align: center;
        }

        .main-model .card-btns {
            margin: 16px 0;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .main-model .card-btns button,
        .main-model #play-game {
            padding: 8px;
            border-radius: 4px;
            letter-spacing: 1px;
            font-size: 20px;
            background-color: white;
            cursor: pointer;
        }

        .main-model .card-btns .active {
            background-color: rgb(255 221 124);
            color: black;
        }

        .emoji-game>button {
            padding: 8px;
            border-radius: 4px;
            letter-spacing: 1px;
            background-color: #FE7A36;
            font-size: 16px;
            border: none;
            color: white;
            margin: auto;
            cursor: pointer;
        }

        .emoji-game .score {
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 1px;
            padding: 8px;
            display: block;
            text-align: center;
            margin-top: 10px;
        }

        #show-model {
            border: none;
            text-decoration: underline;
            color: blue;
            background-color: transparent;
            font-weight: 600;
            margin-bottom: 16px;
            cursor: pointer;
        }

        .container-model-main {
            width: 100%;
            min-height: 100vh;

            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
        }

        .hide {
            display: none;
        }

        .container-model {
            max-width: 600px;
            margin: 32px auto;
            border-radius: 16px;
            background-color: white;
            overflow: hidden;
            box-shadow: 4px 4px 20px rgb(117, 117, 117);

        }

        .header-section-model {
            position: relative;
            text-align: center;
            background: #f0f0f0;
            padding: 20px;
        }

        .header-img {
            max-width: 100%;
            height: auto;
        }

        .main-content-model {
            padding: 20px;
        }

        h1,
        h2,
        p {
            margin-bottom: 10px;
        }

        .close-btn-model {
            font-size: 16px;
            display: inline-block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #3498db;
            color: #fff;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .close-btn-model:hover {
            background-color: #258cd1;
        }

        @media (max-width: 600px) {
            .header-section-model {
                padding: 10px;
            }

            .main-content-model {
                padding: 10px;
            }
        }


        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }
    </style>
</head>

<body style="background-color: #B8D9D4;">

    <div class="preloader-div">
        <span class="preloader"></span>
      </div>

    <div class="start-model">
        <div class="main-model">
            <h1 style="
            padding: 10px;
            background: #C6E1DD;
            border-radius: 5px;
        ">Select Card</h1>
            <div class="card-btns">
                <button data-val="4" style="border: none;">4 cards</button>
                <button data-val="8" style="border: none;">8 cards</button>
                <button data-val="12" style="border: none;">12 cards</button>
                <button data-val="16" style="border: none;">16 cards</button>
                <button data-val="20" style="border: none;">20 cards</button>
                <button data-val="24" style="border: none;">24 cards</button>
            </div>
            <!-- <button type="button" class="btn btn-outline-primary" style="
            margin-top: 5px;
        ">Play!
            </button> -->
            <button id="play-game" onclick="hideModel2()" style="
            border: none;
            background: #979bf7;
        ">Play</button>
        </div>
    </div>
    <section class="emoji-game">
        <span class="score" style="
        padding: 24px;
        background: #C6E1DD;
    ">score 2/12</span>
        <div class="game">

        </div>
        <button onclick="start()">Next</button>
        <button onclick="reset()">Reset level</button>
    </section>

    <div class="model-game hide">
        <h1 style="
        background: white;
    ">You won üéâ</h1>
        <button onclick="start()">Play again</button>
    </div>

    <div style="text-align: center; margin-top: 12px;">
        <button id="show-model" style="font-size: 20px;"><i class="fa-regular fa-circle-question"></i></button>
    </div>

    <div class="container-model-main hide">
        <section class="container-model">


            <div class="main-content-model">
                <h1 style="
    font-size: large;
">How To Play Card
?</h1>
                <p style="
    font-size: small;
    color: #292727;
">Welcome to our memory enhancement game! In this game, you'll embark on an exciting journey to improve your focus,
                    attention, and memory skills. Follow these simple steps to get started:</p>

                <h2 style="
    font-size: large;
">Objective:</h2>
                <p style="
    font-size: small;
    color: #292727;
">The objective of the game is to click on all the emoji cards without repeating a click on the same card.</p>

                <h2 style="
    font-size: large;
">Game Interface:</h2>
                <p style="
    font-size: small;
    color: #292727;
">You'll be presented with several emoji cards, each representing a unique symbol. These cards will be shuffled and
                    arranged randomly on the screen.</p>

                <h2 style="
    font-size: large;
">Remembering:</h2>
                <p style="
    font-size: small;
    color: #292727;
">Pay close attention to the symbol revealed on each card. Your challenge is to remember the symbols as you progress through the game.</p>

                <h2 style="
    font-size: large;
">Tips for Success:</h2>
                <ul>
                    <li style="
    font-size: small;
    color: #292727;
">Don't worry if you don't succeed on your first try, Keep practicing.</li>
                    <li style="
    font-size: small;
    color: #292727;
">Challenge yourself by increasing the number of emoji cards.</li>
                    <li style="
    font-size: small;
    color: #292727;
"> Remember, the most important aspect of this game is to have fun while sharpening your mind</li>
                </ul>


                <div style="text-align: center;">
                    <button id="close-model" class="close-btn-model">Close</button>
                </div>
            </div>
        </section>
    </div>
    <script>
        const cardBtns = document.querySelectorAll('.start-model .card-btns button');
        const scoreEle = document.querySelector('.emoji-game .score');
        let card = 4;
        let score = 0;
        cardBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                card = e.target.dataset.val;
                cardBtns.forEach(cardbtn => {
                    cardbtn.classList.remove('active')
                })
                e.target.classList.add('active');
            })
        })

        function reset() {
            document.querySelector('.start-model').classList.remove('hide');
        }

        function hideModel2() {
            document.querySelector('.start-model').classList.add('hide');
            start();
        }

        const showModel = document.getElementById('show-model');
        showModel.addEventListener('click', function () {
            document.querySelector('.container-model-main').classList.remove('hide');
        })

        const hideModel = document.getElementById('close-model');
        hideModel.addEventListener('click', function () {
            document.querySelector('.container-model-main').classList.add('hide');
        })

        const emojiArr = [
            {
                emoji: "üòÄ",
                id: "1"
            },
            {
                emoji: "üôè",
                id: "2"
            },
            {
                emoji: "üòâ",
                id: "3"
            },
            {
                emoji: "ü§©",
                id: "4"
            },
            {
                emoji: "üçï",
                id: "5"
            },
            {
                emoji: "üï∏Ô∏è",
                id: "6"
            },
            {
                emoji: "üëç",
                id: "7"
            },
            {
                emoji: "üòî",
                id: "8"
            },
            {
                emoji: "üòØ",
                id: "9"
            },
            {
                emoji: "üòò",
                id: "10"
            },
            {
                emoji: "üéà",
                id: "11"
            },
            {
                emoji: "üéÉ",
                id: "12"
            },
            {
                emoji: "üï∂Ô∏è",
                id: "13"
            },
            {
                emoji: "üç°",
                id: "14"
            },
            {
                emoji: "‚úàÔ∏è",
                id: "15"
            },
            {
                emoji: "üíû",
                id: "16"
            },
            {
                emoji: "üòÖ",
                id: "17"
            },
            {
                emoji: "üòé",
                id: "18"
            },
            {
                emoji: "üò™",
                id: "19"
            },
            {
                emoji: "üé†",
                id: "20"
            },
            {
                emoji: "üß§",
                id: "21"
            },
            {
                emoji: "üçû",
                id: "22"
            },
            {
                emoji: "üçµ",
                id: "23"
            },
            {
                emoji: "üåè",
                id: "24"
            },
            {
                emoji: "üõµ",
                id: "25"
            },
            {
                emoji: "üöì",
                id: "26"
            },
            {
                emoji: "üöÅ",
                id: "27"
            },
            {
                emoji: "üóª",
                id: "28"
            },
            {
                emoji: "üß≠",
                id: "29"
            },
            {
                emoji: "‚ö†Ô∏è",
                id: "30"
            },
            {
                emoji: "‚ò¢Ô∏è",
                id: "31"
            },
            {
                emoji: "‚ôªÔ∏è",
                id: "32"
            },
            {
                emoji: "‚ôø",
                id: "33"
            },
            {
                emoji: "‚ù§Ô∏è",
                id: "34"
            },
            {
                emoji: "üîï",
                id: "35"
            },
            {
                emoji: "üèçÔ∏è",
                id: "36"
            },
            {
                emoji: "üè¢",
                id: "37"
            },
            {
                emoji: "üè•",
                id: "38"
            },
            {
                emoji: "üèØ",
                id: "39"
            },
            {
                emoji: "üóΩ",
                id: "40"
            },
            {
                emoji: "üåü",
                id: "41"
            },
            {
                emoji: "üéâ",
                id: "42"
            },
            {
                emoji: "üé®",
                id: "43"
            },
            {
                emoji: "‚öΩ",
                id: "44"
            },
            {
                emoji: "üéÆ",
                id: "45"
            },
            {
                emoji: "üîÆ",
                id: "46"
            },
            {
                emoji: "üò¥",
                id: "47"
            },
            {
                emoji: "ü§Ø",
                id: "48"
            },
            {
                emoji: "üòµ",
                id: "49"
            },
            {
                emoji: "ü§≠",
                id: "50"
            },
            {
                emoji: "üò∑",
                id: "51"
            },
        ]
        let selected = [];
        const emojisection = document.querySelector('.emoji-game .game');
        const emojibtns = document.querySelectorAll('.emoji-game .game .emoji-btn');

        let randomArrangement = [];
        function generateRandomArray() {
            randomArrangement = [];
            let nums = new Set();

            while (nums.size < card) {
                let num = Math.floor(Math.random() * 51);
                if (!nums.has(num)) {
                    randomArrangement.push(num);
                    nums.add(num);
                }
            }
        }

        function changeOrder() {
            for (let i = randomArrangement.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [randomArrangement[i], randomArrangement[j]] = [randomArrangement[j], randomArrangement[i]];
            }
        }

        function displayEmoji() {
            changeOrder();
            let emojiHtml = (randomArrangement).map(i => {
                return `<button class="emoji-btn" id=${emojiArr[i].id} onclick="check(${emojiArr[i].id})">${emojiArr[i].emoji}</button>`
            }).join("");

            emojisection.innerHTML = emojiHtml;
        }
        function check(btnid) {
            if (selected.includes(btnid)) {
                document.querySelector('.model-game').classList.remove('hide');
                document.querySelector('.model-game h1').textContent = "You Loose üëé"
                return;
            }
            selected.push(btnid);
            score = score + 1;
            scoreEle.textContent = `Score ${score}/${card}`;
            if (selected.length === randomArrangement.length) {
                document.querySelector('.model-game').classList.remove('hide');
                document.querySelector('.model-game h1').textContent = "You Won üéâ"
            }
            displayEmoji();
        }

        function start() {
            document.querySelector('.model-game').classList.add('hide');
            score = 0;
            scoreEle.textContent = `Score ${score}/${card}`;
            if (card == 8 || card == 4) {
                document.querySelector('.emoji-game .game').classList.add('card4')
            }
            else {
                document.querySelector('.emoji-game .game').classList.remove('card4')
            }
            selected = []
            generateRandomArray();
            displayEmoji();
        }

    </script>
    <%- include('../../partials/scriptlinks.ejs') %>
</body>

</html>